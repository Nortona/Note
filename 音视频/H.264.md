
# 视频预处理
![[Pasted image 20230814161419.jpg]]
图像采集的功能由图像传感器实现，目前图像传感器主要有电荷耦合器件（CCD，Charge Coupled Devices）和CMOS传感器。

将实际景物转换为图像信号时总会引入各种噪声和畸变失真，因此一般需要对图像传感器的图像进行预处理，包括**伽马校正、图像插值、图像校正、白平衡、图像增强以及增益控制**等技术，一方面改善图像的质量，另一方面，可使得图像有利于视频编码的处理。

## 色彩插值（Color Interpolation）
一个像素点往往只能给出记录从纯白到纯黑的系列色调，因而只能给出单色的色调值，不能同时给出RGB三组数据。因此，对于彩色的图像值的获取，就需要借助**色彩滤镜阵列（CFA，Color Filter Array）**，即在图像传感器的像素表面覆盖一个多色的滤镜阵列。通过应用不同的色彩滤镜阵列，可以获得不同的图像输出阵列，其中，最常见的一种滤镜阵列的图像传感器获得的是一幅如图2.10所示的马赛克的图像阵列，即Bayer模型。
![[Pasted image 20230814161658.jpg]]

在这种图像阵列中，每个像素值只有一个颜色的色调值，另外两个颜色的色调必须利用相邻像素之间的相关性，通过数据计算获得，这些方法通常被称为色彩插值。


## 色彩校正（Color Correction）
通过插值已经得到了RGB三基色齐全的图像（R、G、B）了，但传感器响应的这个图像与真实场景之间仍存在差异。这其中存在多方面的原因，涉及图像传感器中光学器件（棱镜）的光谱特性、场景的光源光照条件（诸如白光、荧光或者钨光）以及色彩滤镜的光谱特性等

为了补偿这种差异，必须对图像的像素值（R、G、B）按照公式（2.10）进行变换处理。
![[Pasted image 20230814161806.jpg]]

## 伽马校正（Gamma Correction）
在理想状态时，输出的色彩强度和电子束的电压信号之间的关系应该是线性的，如图2.12（a）所示；但实际上，它们之间的关系如图2.12（b）所示，输出的强度与电压信号之间的关系是非线性的。
![[Pasted image 20230814162001.jpg]]

在理想状态时，输出的色彩强度和电子束的电压信号之间的关系应该是线性的，如图2.12（a）所示；但实际上，它们之间的关系如图2.12（b）所示，输出的强度与电压信号之间的关系是非线性的。
![[Pasted image 20230814162023.jpg]]

其中，I指显示器输出的光强度；P指显示器上加载的光束电压，一般光束电压P是由图像相应位置的像素值决定的；γ为伽马值。

为了在显示器上显示的图像效果和实际相符，有必要在摄像机获取图像后进行伽马校正，将上述这种非线性的关系校正为线性关系，公式如下：
![[Pasted image 20230814162054.jpg]]

Pnew是进行了校正处理的图像的像素值；Pold是校正前的像素值；伽马值γ影响着校正的程度，γ＝1时，不进行校正，γ越大，像素值的校正量越大。

## 图像增强
图像增强作为一种重要的图像处理技术，目的无非就是两个：第一，更适合人眼的感觉；第二，有利于后续的分析处理。

图像增强主要包括**直方图均衡、平滑滤波、中值滤波、锐化**等内容。一般情况下，图像增强既可以在空间域实现，也可以在频域内实现。



# 编码方式
根据采用信源模型，视频编码可以分为两大类：基于波形的编码和基于内容的编码。
它们利用不同的压缩编码方法，得到相应的量化前的参数；再对这些参数进行量化，用二进制码表示其量化值；最后，进行无损熵编码进一步压缩码率。解码则为编码的逆过程。

## 基于波形的编码
基于波形的编码采用了把预测编码和变换编码组合起来的基于块的混合编码方法。

采用混合编码方法时，首先**把一幅图像分成固定大小的块**，例如块**8×8（即每块8行，每行8个像素）**、块16×16（每块16行，每行16个像素）等，然后对块进行压缩编码处理。

H.261、H.263、H.264、FRExt、FRExt、SVC所有这些视频编码都采用了基于块的混合编码法，都属于基于波形的编码。

## 基于内容的编码

基于块的编码易于操作，但由于人为地把一幅图像划分成许多固定大小的块，**当包含边界的块属于不同物体时，它们分别具有不同的运动方向，不能用同一个运动矢量表示该边界块的运动状态**。如果强制划分成固定大小的块，这种边界块必然会产生高的预测误差和失真，严重影响了压缩编码信号的质量。

基于内容的编码技术。先把视频帧分成对应于不同物体的区域，然后分别对其进行编码。具体说来，就是对不同物体的形状、运动和纹理进行编码。

==**MPEG-4采用的编码方法既是基于块的混合编码，又有基于内容的编码方法。**==

# 编码基本原理

## 预测编码
### 帧内预测编码


### 帧间预测编码

### 运动估计

## 变换编码


## 熵编码